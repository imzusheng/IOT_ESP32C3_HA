# SUG.md - 系统改进建议

## FSM日志强调色配置 (2025-08-10)

### 改进内容
为FSM状态机相关的日志添加了强调色，使其在终端输出中更醒目。

### 具体改动

#### 1. 日志系统增强 (app/lib/logger.py)
- 添加了ANSI颜色代码支持
- 在 `_COLORS` 字典中定义了模块颜色映射：
  - FSM: 青色加粗 (\033[1;36m)
  - WiFi: 绿色加粗 (\033[1;32m) 
  - MQTT: 黄色加粗 (\033[1;33m)
  - RESET: 重置颜色 (\033[0m)
- 修改了 `_handle_log` 方法，在模块名前添加颜色代码

#### 2. FSM模块重构 (app/fsm.py)
- 导入了全局日志函数：`from lib.logger import info, error, warning, debug`
- 将所有 `print(f"[FSM] ...")` 语句改为对应的日志函数调用
- 使用 `module="FSM"` 参数标识模块来源
- 保持了所有现有日志内容和级别

### 改动范围
- 修改了2个文件：`app/lib/logger.py` 和 `app/fsm.py`
- 修改了约30个日志输出语句
- 保持了向后兼容性

### 效果
- FSM日志现在以青色显示，便于快速识别状态机相关输出
- 统一使用日志系统，便于管理和配置
- 支持其他模块的颜色扩展
- 未来可通过配置文件轻松调整颜色

### 使用方式
无需额外配置，FSM日志将自动显示为强调色。其他模块如需颜色支持，只需在日志调用时添加 `module="ModuleName"` 参数，并在 `_COLORS` 字典中添加对应颜色即可。